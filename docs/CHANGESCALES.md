# Changing Dual Quantizer scales

If you want to create your own scales or scale sets here is how.

Go into the software directory and create a text file containing a description of your scale set. You can use common\_scales.txt or esoteric\_scales.txt as a starting point if you want. The syntax is as follows. 

Each command or scale description is on a new line. Things in &lt;anglebrackets&gt; are to be replaced with whatever value you want. Things in [square brackets] are optional.

Each scale can be given a description, which can be any text you want; it appears only in comments in the table\_builder output.

## Commands
In the absence of commands to the contrary each scale is assigned
to be the next scale in the same bank as the previous; first scale is
bank 1 (index 0), scale 1 (index 0)

Use commands to change this sequence:
<dl>
<dt>+b &lt;bank&gt; [#&lt;description&gt;]</dt>
<dd>Append next scale to bank #&lt;bank&gt; (index &lt;bank&gt;-1) with given description. Description overwrites previous description if given.</dd>

<dt>+s &lt;scale&gt; </dt>
<dd>Assign next scale to scale number &lt;scale&gt; (index &lt;scale&gt;-1) in the current bank.</dd>

<dt>+d &lt;bank1&gt; &lt;scale1&gt; &lt;bank2&gt; &lt;scale2&gt;</dt>
<dd>Duplicate scale at bank &lt;bank1&gt;, scale &lt;scale1&gt; to bank &lt;bank2&gt;, scale &lt;scale2&gt;. (Dupicate entries are made in the bank/scale table, but the scale data itself is not duplicated.)</dd>
</dt>
</dl>

## Scale descriptors
A scale descriptor can be one of:

<dl>
<dt>&lt;path to scl file&gt; [#&lt;description&gt;]</dt>
<dd>Scale is described in Scala format file. Description if present overrides the description in the file.</dd>

<dt>+g &lt;n&gt; &lt;generator&gt; [&lt;period&gt;] [&lt;firstnote&gt;] [#&lt;description&gt;]</dt>
<dd>Generate a scale with &lt;n&gt; notes using generator &lt;generator&gt; and period &lt;period&gt; starting from first note &lt;firstnote&gt;. Parameters can be ratios or cents. E.g.:<br>
+g 12 3/2 2/1 500<br>
for a 12-tone Pythagorean scale starting at 500 cents above the 0 volt note.  If the period is omitted, 2/1 is the default. If first note is omitted, 0 is the default.</dd>

<dt>+e &lt;n&gt; [list of numbers] [#&lt;description&gt;]</dt>
<dd>Generate a scale using the listed entries (indexed from 0) from an &lt;n&gt;-equal division of the octave. E.g.:<br>
+e 12 0 2 4 5 7 9 11<br>
for a 12-equal major scale. If the list is omitted, the scale contains all
n notes.</dd>

<dt>+q &lt;n&gt; &lt;period&gt; [list of numbers] [#&lt;description&gt;]</dt>
<dd>Same as +e except a period to be equally divided is given. E.g.:<br>
+q 13 3/1<br>
for Bohlen-Pierce equal temperament.
</dd>
</dl>

## Table generation
Once you have your description file, feed it to table\_builder.py:

    ./table_builder -i <path>;

where &lt;path&gt; is the file path to your description file. Assuming there are no errors, the script will create an output file with the same name but file extension .cpp, containing some c++ code.

Back up your copies of Quantizer/Quantizer.cpp and Quantizer/Quantizer.h. In a text editor, open Quantizer/Quantizer.cpp. Find the line

    // INSERT AUTOGENERATED SCALE CLASS DATA HERE

and delete everything after that and before

    // END AUTOGENERATED SCALE CLASS DATA

and replace it with the lines from your .cpp output file from the beginning to before

    // for protected header

and save.

Then in a text editor, open Quantizer/Quantizer.h. Find the line

    // INSERT AUTOGENERATED SCALE HEADER DATA HERE

and delete everything after that and before

    // END AUTOGENERATED SCALE HEADER DATA

and replace it with the lines from your .cpp output file from after

    // for protected header

to the end and save.

You now have a customized version of the Quantizer library with your scales. Use it instead of the original version.
